<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Keep The Baby Happy</title>
    <meta name="description" content="Keep the Baby Happy Or Else!" />
    <link rel="stylesheet" href="styles.css" type="text/css"  >
  </head>
  <body>
    <h1 id="advance">Find What Baby Wants To Make It Happy!<h1>
      <p>
        Match the Tiles To Make the Baby Happy!</br>
        If you Match Drugs or Beer or Don't Make a Match The Baby Will Get Mad!
      </p>
    <div id="status-holder">
      <img src="images/level-3.jpg" />
    </div>
    <div id="card-holder">
      <ul class="cards-list">
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
        <li class="cards">
          <img class="card" src="images/card-back.jpg" />
                  </li>
      </ul>
    </div>
    <script>
    var level = 3;

    var cardArray = [];
    for (var i=1; i<6; i++){
      var base = "images/good-";
      var numeral = String(i);
      var end = ".jpg";
      cardArray.push( base.concat(numeral, end));
      cardArray.push( base.concat(numeral, end));
    }
    for (var i=1; i<4; i++){
      var base = "images/bad-";
      var numeral = String(i);
      var end = ".jpg";
      cardArray.push( base.concat(numeral, end));
      cardArray.push( base.concat(numeral, end));
    }
    var cards = document.getElementsByClassName('card');
    cardArray = shuffle( cardArray );
    var arrayLength = cards.length;
    for( var i = 0; i < arrayLength; i++){
      cards[i].src=cardArray[i];
    }
    var clickOne = 0;
    var tester = '';
    var updown = '';
   document.body.onclick = function(e){
     e=window.event? event.srcElement: e.target;
     if(e.className && e.className.indexOf('card')!=-1){
       if(clickOne == 1){
         //we have already one card picked so do a compare
         if (tester == e.src ){
           //guessed right so uplevel
           if( e.src.search('bad') > -1){
             updown = "down";
           }else{
             updown = "up";
           }
           level = checkLevel(level, updown);
         }else{
           //guessed wrong so downlevel
           level = checkLevel(level, "down");
         }
         clickOne = 0;
       }else{
         //set the first card variable
         clickOne = 1;
         tester = e.src;
       }

     }
   }

    function shuffle(array) {
      var currentIndex = array.length, temporaryValue, randomIndex;

      // While there remain elements to shuffle...
      while (0 !== currentIndex) {

        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;

        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }

      return array;
    }
    function checkLevel( level, updown ){
      var baseStr = "images/level-";
      var endStr = ".jpg";
      if (level > 1 && level < 5) {
        if(updown == 'up'){
          level--;
        }else if (updown =='down') {
          level++;
        }else{
          alert("invalid argument supplied to checkLevel function");
        }
        levelStr = String(level)
        var file = baseStr.concat(levelStr, endStr);
        document.getElementById("status-holder").getElementsByTagName('img')[0].src = file;
      }else if (level <= 1) {
        if(updown == 'up'){
          var win = 'https://www.youtube.com/watch?v=CMIAm1V1W3s';
          window.open(win);
        }else if (updown =='down') {
          level++;
        }
      }else if (level >= 5){
        if(updown == 'up'){
          level--;
        }else if (updown =='down') {
          lose = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
          window.open(lose);
        }
      }
      return level;
    }

    </script>
  </body>
</html>
